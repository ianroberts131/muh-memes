<% provide(:title, "Edit user") %>
<% provide(:button_text, 'Save Changes') %>
<% content_for(:head) do %>
  <meta name="turbolinks-cache-control" content="no-cache">
  <%= javascript_include_tag 'userEdit' %>
<% end %>

<h1>Update your profile</h1>

<div class="row">
  <div class="col-md-4 col-md-offset-4">
    <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>
      
        <%= f.label :avatar %><br/>
        <div id='avatar-canvas-area' class="hidden">
          <canvas id="avatar-canvas" ></canvas>
        </div>
        <% if @user.avatar_url %>
          <img src="<%= @user.avatar_url(:thumb)%>" id="current-avatar">
        <% else %>
          <i class="glyphicon glyphicon-user" id="default-avatar-image"></i>
        <% end %>
        <%= f.file_field :avatar, accept: 'image/jpeg,image/gif,image/png', id: "avatar-upload", class: "filestyle", 'data-buttonName' => "btn btn-default",
                                                                                                'data-input' => false, 'data-buttonText' => "Upload image" %>
      
        <%= f.label :name %>
        <%= f.text_field :name, class: 'form-control' %>
        
        <%= f.label :email %>
        <%= f.email_field :email, class: 'form-control' %>
        
        <%= f.label :password %>
        <%= f.password_field :password, class: 'form-control' %>
        
        <%= f.label :password_confirmation %>
        <%= f.password_field :password_confirmation, class: 'form-control' %>
        
        <%= f.submit yield(:button_text), class: "btn btn-primary" %>
      <% end %>
  </div>
</div>